<div class="container mt-4">
  <h1 class="text-center">Qualifikationsübersicht</h1>

  <div class="mb-4 mt-3">
    <div class="d-flex justify-content-center align-items-center gap-2">
      <label for="filterInput" class="me-2">Filter:</label>
      <input
        type="text"
        class="form-control"
        id="filterInput"
        name="filterInput"
        placeholder="Bezeichnung..."
        style="width: 300px;"
        [(ngModel)]="filterText"
        (keyup.enter)="applyFilter()"
      />
      <button class="btn btn-primary" (click)="applyFilter()">
        Anwenden
      </button>
    </div>
  </div>

  <div class="d-flex justify-content-center">
    <table class="table table-striped table-hover" style="max-width: 800px;">
      <thead>
      <tr>
        <th>ID</th>
        <th>Bezeichnung</th>
        <th>Aktionen</th>
      </tr>
      </thead>
      <tbody>

      <tr *ngFor="let a of qualifications$ | async; trackBy: trackByQualificationId">
        <td>{{ a.id }}</td>
        <td>{{ a.skill }}</td>
        <td>
          <button class="btn btn-sm btn-primary" (click)="openEditModal(a)">
            Bearbeiten
          </button>
          <button class="btn btn-sm btn-danger ms-2" (click)="delete(a.id!)">
            Löschen
          </button>
        </td>
      </tr>

      <tr *ngIf="isAdding" class="table-success">
        <td>-</td>
        <td>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="newQualificationSkill"
            placeholder="Neue Bezeichnung..."
            (keyup.enter)="saveNewQualification()"
            autofocus
          />
        </td>
        <td>
          <button class="btn btn-sm btn-success" (click)="saveNewQualification()">
            Speichern
          </button>
          <button class="btn btn-sm btn-secondary ms-2" (click)="cancelAdding()">
            Abbrechen
          </button>
        </td>
      </tr>
      </tbody>
    </table>
  </div>


  <div class="d-flex justify-content-center mt-3">
    <div style="max-width: 800px; width: 100%;">    <button
      class="btn btn-success"
      (click)="startAdding()"
      *ngIf="!isAdding"
    >
      Hinzufügen
    </button>
  </div>
  </div>

</div>

<div class="modal-backdrop" *ngIf="showEditModal" (click)="closeEditModal()"></div>
<div class="modal-dialog-custom" *ngIf="showEditModal">
  <div class="modal-content-custom">
    <div class="modal-header-custom">
      <h5>Qualifikation bearbeiten</h5>
      <button type="button" class="btn-close" (click)="closeEditModal()"></button>
    </div>
    <div class="modal-body-custom">

      <div class="mb-3">
        <label class="form-label">Bezeichnung</label>
        <input
          type="text"
          class="form-control"
          [(ngModel)]="editingSkill"
          (keyup.enter)="saveEdit()"
          autofocus
        >
      </div>
    </div>
    <div class="modal-footer-custom">
      <button class="btn btn-secondary" (click)="closeEditModal()">
        Abbrechen
      </button>
      <button class="btn btn-primary" (click)="saveEdit()">
        Speichern
      </button>
    </div>
  </div>
</div>
