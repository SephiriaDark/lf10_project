<div class="modal fade"
     tabindex="-1"
     [class.show]="show"
     [style.display]="show ? 'block' : 'none'">

  <div class="modal-dialog modal-xl">
    <div class="modal-content">

      <div class="modal-header">
        <h5 class="modal-title">Neuen Mitarbeiter anlegen</h5>
        <button class="btn-close" (click)="close()"></button>
      </div>

      <div class="modal-body">
        <h5>Kontakt informationen:</h5>
        <div class="row mb-1">
          <div class="col-md-3">
            <strong>Vorname:</strong>
          </div>
          <div class="col-md-3">
            <strong>Nachname:</strong>
          </div>
          <div class="col-md-3">
            <strong>Telefonnummer:</strong>
          </div>
        </div>
        <div class="row mb-3">
          <div class="col-md-3">
            <input class="form-control"
                   placeholder="Vorname"
                   [(ngModel)]="employee.firstName"
                   name="firstName"
                   required
                   #firstName="ngModel"
                   [ngClass]="{'is-invalid': firstName.invalid && (firstName.dirty || firstName.touched)}">
            <div *ngIf="firstName.invalid && (firstName.dirty || firstName.touched)" class="text-danger">
              Bitte geben Sie den Vornamen ein.
            </div>

          </div>
          <div class="col-md-3">
            <input class="form-control"
                   placeholder="Nachname"
                   [(ngModel)]="employee.lastName"
                   required
                   #lastName="ngModel"
                   [ngClass]="{'is-invalid': lastName.invalid && (lastName.dirty || lastName.touched)}">
            <div *ngIf="lastName.invalid && (lastName.dirty || lastName.touched)" class="text-danger">
              Bitte geben Sie den Nachnamen ein.
            </div>
          </div>

          <div class="col-md-3">
            <input class="form-control"
                   placeholder="Telefon"
                   [(ngModel)]="employee.phone"
                   required
                   #phone="ngModel"
                   pattern="^\+?[0-9]+$"
                   [ngClass]="{'is-invalid': phone.invalid && (phone.dirty || phone.touched)}">
            <div *ngIf="phone.invalid && (phone.dirty || phone.touched)" class="text-danger">
              <div *ngIf="phone.errors?.['required']">Bitte geben Sie die Telefonnummer ein.</div>
              <div *ngIf="phone.errors?.['pattern']">Die Telefonnummer darf nur Ziffern enthalten.</div>
            </div>
          </div>

        </div>

        <div class="row mb-3">
          <h5>Addresse:</h5>
          <div class="row mb-1">
            <div class="col-md-3">
              <strong>Postzahl:</strong>
            </div>
            <div class="col-md-3">
              <strong>Ort:</strong>
            </div>
            <div class="col-md-3">
              <strong>Straße:</strong>
            </div>
          </div>
          <div class="row mb-3">
            <div class="col-md-3">
              <input class="form-control"
                     placeholder="PLZ"
                     [(ngModel)]="employee.postcode"
                     required
                     pattern="^\d{5}$"
                     #postcode="ngModel"
                     [ngClass]="{'is-invalid': postcode.invalid && (postcode.dirty || postcode.touched)}">
              <div *ngIf="postcode.invalid && (postcode.dirty || postcode.touched)" class="text-danger">
                <div *ngIf="postcode.errors?.['required']">Bitte geben Sie die PLZ ein.</div>
                <div *ngIf="postcode.errors?.['pattern']">Die PLZ muss genau 5 Ziffern enthalten.</div>
              </div>
            </div>
            <div class="col-md-3">
              <input class="form-control"
                     placeholder="Ort"
                     [(ngModel)]="employee.city"
                     required
                     #city="ngModel"
                     [ngClass]="{'is-invalid': city.invalid && (city.dirty || city.touched)}">
              <div *ngIf="city.invalid && (city.dirty || city.touched)" class="text-danger">
                Bitte geben Sie den Ort ein.
              </div>
            </div>
            <div class="col-md-3">
              <input class="form-control"
                     placeholder="Straße"
                     [(ngModel)]="employee.street"
                     required
                     #street="ngModel"
                     [ngClass]="{'is-invalid': street.invalid && (street.dirty || street.touched)}">
              <div *ngIf="street.invalid && (street.dirty || street.touched)" class="text-danger">
                Bitte geben Sie die Straße ein.
              </div>
            </div>
          </div>
        </div>

        <h5>Qualifikationen:</h5>
        <div class="row mb-3">
          <div class="col">
            <div class="qualification-selector border rounded p-3"
                 style="max-height: 300px; overflow-y: auto;">
              <div *ngIf="availableQualifications.length === 0" class="text-muted">
                Lade Qualifikationen...
              </div>
              <div *ngFor="let qual of availableQualifications" class="form-check mb-2">
                <input
                  type="checkbox"
                  class="form-check-input"
                  [id]="'qual-' + qual.id"
                  [checked]="isSelected(qual.id!)"
                  (change)="toggleQualification(qual.id!)">
                <label class="form-check-label" [for]="'qual-' + qual.id">
                  {{qual.skill}}
                </label>
              </div>
            </div>
            <small class="text-muted" *ngIf="selectedQualificationIds.length > 0">
              {{selectedQualificationIds.length}} Qualifikation(en) ausgewählt
            </small>
          </div>
        </div>
      </div>

      <div class="modal-footer">
        <button class="btn btn-secondary" (click)="close()">
          Abbrechen
        </button>
        <button class="btn btn-success" (click)="save()">
          Speichern
        </button>
      </div>

    </div>
  </div>
</div>

<div class="modal-backdrop fade show" *ngIf="show"></div>
